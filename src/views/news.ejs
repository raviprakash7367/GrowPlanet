<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/homepage.css">
    <link rel="stylesheet" href="/styles/plantopedia.css">
    <link rel="stylesheet" href="/styles/plant.css">
    <link rel="stylesheet" href="/styles/farmers.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Farming News - Grow Planet</title>
    <style>
        .news-container {
            padding: 2rem 5%;
            background-color: #f8f9fa;
        }
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        .news-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .news-card:hover {
            transform: translateY(-5px);
        }
        .news-category {
            background: #617143;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 1rem;
        }
        .news-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #333;
        }
        .news-date {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .news-description {
            color: #555;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .read-more {
            display: inline-block;
            background: #DF7857;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            text-decoration: none;
            transition: background 0.3s ease;
        }
        .read-more:hover {
            background: #c56a4d;
            color: white;
        }
        .news-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        .filter-btn {
            background: transparent;
            border: 2px solid #617143;
            color: #617143;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-btn:hover, .filter-btn.active {
            background: #617143;
            color: white;
        }
    </style>
</head>
<body>
    <section>
        <div>
            <nav>
                <svg class="brand-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 98.586 98.545">
                    <path id="psychiatry_FILL0_wght400_GRAD0_opsz48" d="M51.185,104.545V61.657H48.447a40.548,40.548,0,0,1-16.5-3.4A43.043,43.043,0,0,1,18.186,48.61,41.737,41.737,0,0,1,9.081,34.176,48.085,48.085,0,0,1,6,17.1V6H16.68A40.372,40.372,0,0,1,32.974,9.4a44.394,44.394,0,0,1,13.966,9.646A43.567,43.567,0,0,1,54.4,29.6a46.342,46.342,0,0,1,4.176,12.353q1.1-1.666,2.328-3.192t2.6-3.054a44.394,44.394,0,0,1,13.966-9.646,40.7,40.7,0,0,1,16.431-3.4h10.68v11.1A45.422,45.422,0,0,1,101.3,50.831a44.4,44.4,0,0,1-9.311,14.435,43.654,43.654,0,0,1-13.9,9.577,40.6,40.6,0,0,1-16.226,3.331H59.4v26.371Zm.137-51.355a44.421,44.421,0,0,0-2.739-15.753,37.077,37.077,0,0,0-7.531-12.422,33.665,33.665,0,0,0-11.776-7.842,39.532,39.532,0,0,0-15.062-2.845,48.543,48.543,0,0,0,2.533,16.031,34.579,34.579,0,0,0,7.326,12.422,28.616,28.616,0,0,0,12.392,8.328A49.543,49.543,0,0,0,51.322,53.191ZM59.4,69.846A41.7,41.7,0,0,0,74.6,67.14,31.323,31.323,0,0,0,86.375,59.3a33.963,33.963,0,0,0,7.394-12.283,47.38,47.38,0,0,0,2.6-16.031,39.9,39.9,0,0,0-15.2,2.845A33.665,33.665,0,0,0,69.4,41.671a33.1,33.1,0,0,0-7.942,13.047A52.213,52.213,0,0,0,59.4,69.846ZM59.4,69.846ZM51.322,53.191Z" transform="translate(-6 -6)" fill="#fff"/>
                </svg>
                <a class="grow_planet" href="homepage.html">Grow Planet</a>
                <ul>
                    <li><a class="header-text" href="plantopedia.html">Plantopedia</a></li>
                    <li><a class="header-text" href="/login">BidHere</a></li>
                    <li><a class="header-text" href="sellHere.html">SellHere</a></li>
                </ul>
            </nav>
        </div>

        <div class="news-container">
            <h1 class="text-center mb-4" style="color: #617143;">Farming News & Updates</h1>
            
            <div class="news-filters">
                <button class="filter-btn active" onclick="filterNews('all')">All News</button>
                <button class="filter-btn" onclick="filterNews('technology')">Technology</button>
                <button class="filter-btn" onclick="filterNews('market')">Market Prices</button>
                <button class="filter-btn" onclick="filterNews('weather')">Weather</button>
                <button class="filter-btn" onclick="filterNews('subsidies')">Subsidies</button>
            </div>

            <div class="news-grid">
                <% for (let i = 0; i < Math.min(12, news.length); i++) { %>
                    <div class="news-card">
                        <% 
                        // Determine news category based on title/description
                        let category = 'General';
                        const title = news[i].title.toLowerCase();
                        const desc = news[i].description ? news[i].description.toLowerCase() : '';
                        if (title.includes('price') || title.includes('market') || desc.includes('price') || desc.includes('market')) {
                            category = 'Market';
                        } else if (title.includes('technology') || title.includes('tech') || desc.includes('technology')) {
                            category = 'Technology';
                        } else if (title.includes('weather') || title.includes('climate') || desc.includes('weather')) {
                            category = 'Weather';
                        } else if (title.includes('subsidy') || title.includes('government') || desc.includes('subsidy')) {
                            category = 'Subsidies';
                        }
                        %>
                        <span class="news-category"><%= category %></span>
                        <h2 class="news-title"><%= news[i].title %></h2>
                        <% if (news[i].publishedAt) { %>
                            <div class="news-date">
                                <%= new Date(news[i].publishedAt).toLocaleDateString('en-US', { 
                                    year: 'numeric', 
                                    month: 'long', 
                                    day: 'numeric' 
                                }) %>
                            </div>
                        <% } %>
                        <% if (news[i].description) { %>
                            <p class="news-description"><%= news[i].description %></p>
                        <% } %>
                        <a href="<%= news[i].url %>" target="_blank" class="read-more">Read Full Article</a>
                    </div>
                <% } %>
            </div>
        </div>
    </section>

    <script>
        function filterNews(category) {
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText.toLowerCase().includes(category)) {
                    btn.classList.add('active');
                }
            });

            // Filter news cards
            document.querySelectorAll('.news-card').forEach(card => {
                const cardCategory = card.querySelector('.news-category').innerText.toLowerCase();
                if (category === 'all' || cardCategory.includes(category)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>